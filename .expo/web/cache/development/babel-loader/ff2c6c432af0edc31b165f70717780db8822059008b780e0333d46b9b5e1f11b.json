{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { React, useState, useEffect, useRef } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport { collection, addDoc, serverTimestamp, doc, updateDoc, getDoc } from 'firebase/firestore';\nimport { db, app } from \"../firebase/firebase\";\nimport { useSelector } from \"react-redux\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CreateComment = function CreateComment(_ref) {\n  var postId = _ref.postId,\n    tag = _ref.tag,\n    setTag = _ref.setTag;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    reply = _useState2[0],\n    setReply = _useState2[1];\n  var userId = useSelector(function (state) {\n    return state.userProfile.userId;\n  });\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    image = _useState4[0],\n    setImage = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var replyInputRef = useRef(null);\n  useEffect(function () {\n    if (tag) {\n      setReply(\"@\" + tag.tagName + \", \");\n      Keyboard.dismiss();\n      setTimeout(function () {\n        if (replyInputRef.current) {\n          replyInputRef.current.focus();\n        }\n      }, 100);\n    }\n  }, [tag]);\n  useEffect(function () {\n    if (reply.length === 0) {\n      setTag(null);\n    }\n  }, [reply]);\n  var handleCommentSubmit = function handleCommentSubmit() {\n    if (reply.trim() !== '') {\n      var addComment = function () {\n        var _ref2 = _asyncToGenerator(function* (postId, comment) {\n          try {\n            var commentRef = collection(db, 'Posts', postId, 'comments');\n            var handleImageUpload = function () {\n              var _ref3 = _asyncToGenerator(function* (image) {\n                setLoading(true);\n                var storage = getStorage(app);\n                var storageRef = ref(storage, \"images/\" + Date.now() + \"_\" + image);\n                var response = yield fetch(image);\n                var blob = yield response.blob();\n                var uploadTask = uploadBytes(storageRef, blob);\n                yield uploadTask;\n                var downloadURL = yield getDownloadURL(storageRef);\n                return downloadURL;\n              });\n              return function handleImageUpload(_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }();\n            var updateComment = function () {\n              var _ref4 = _asyncToGenerator(function* () {\n                var commentRef = doc(db, 'Posts', tag.postId, 'comments', tag.commentId);\n                var commentSnapshot = yield getDoc(commentRef);\n                var commentData = commentSnapshot.data();\n                var repliesArray = (commentData == null ? void 0 : commentData.commentReplies) || [];\n                repliesArray.push(userId);\n                yield updateDoc(commentRef, {\n                  commentReplies: repliesArray\n                });\n              });\n              return function updateComment() {\n                return _ref4.apply(this, arguments);\n              };\n            }();\n            if (tag) {\n              updateComment();\n            }\n            var downloadURL = '';\n            if (image) {\n              downloadURL = yield handleImageUpload(image);\n            }\n            yield addDoc(commentRef, {\n              userId: userId,\n              reply: reply,\n              downloadURL: downloadURL,\n              timestamp: serverTimestamp(),\n              tag: {\n                tagId: tag ? tag.tagId : null,\n                tagName: tag ? tag.tagName : null\n              }\n            });\n          } catch (error) {\n            alert('Failed to add comment');\n            console.error('Error adding comment: ', error);\n          }\n        });\n        return function addComment(_x, _x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n      addComment(postId, reply, image);\n      setReply('');\n      setImage(null);\n      setTag(null);\n    }\n  };\n  var selectImage = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      var permissionResult = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (permissionResult.granted === false) {\n        alert('Permission to access camera roll is required!');\n        return;\n      }\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1\n      });\n      if (!result.canceled) {\n        setImage(result.uri);\n      }\n    });\n    return function selectImage() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var handleDeleteImage = function handleDeleteImage() {\n    setImage(null);\n  };\n  return _jsxs(View, {\n    style: styles.bottomnav,\n    children: [image && _jsxs(View, {\n      style: styles.viewimage,\n      children: [_jsx(Image, {\n        source: {\n          uri: image\n        },\n        style: styles.setimage\n      }), _jsx(TouchableOpacity, {\n        onPress: handleDeleteImage,\n        style: styles.deleteButton,\n        children: _jsx(FontAwesome, {\n          name: \"times\",\n          size: 20,\n          color: \"#2696b8\"\n        })\n      })]\n    }), _jsx(TouchableOpacity, {\n      onPress: selectImage,\n      style: styles.attachmentIcon,\n      children: _jsx(FontAwesome, {\n        name: \"image\",\n        size: 20,\n        color: \"rgba(38, 150,184,0.7)\"\n      })\n    }), _jsx(TextInput, {\n      ref: replyInputRef,\n      style: styles.topicInput,\n      placeholder: \"Join the conversation\",\n      onChangeText: setReply,\n      value: reply,\n      maxLength: 300\n    }), _jsx(TouchableOpacity, {\n      onPress: handleCommentSubmit,\n      style: styles.attachmentIcon,\n      children: loading ? _jsx(ActivityIndicator, {}) : _jsx(FontAwesome, {\n        name: \"send-o\",\n        size: 20,\n        color: \"rgba(38, 150,184,0.7)\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  bottomnav: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 10,\n    backgroundColor: 'white',\n    flexDirection: 'row',\n    borderTopWidth: 3,\n    borderTopColor: '#f8f8f8'\n  },\n  topicInput: {\n    borderWidth: 1,\n    borderColor: '#f0f0f0',\n    borderRadius: 10,\n    padding: 10,\n    flex: 1\n  },\n  attachmentIcon: {\n    height: 30,\n    width: 35,\n    marginVertical: 10,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  setimage: {\n    height: 200,\n    borderRadius: 20\n  },\n  viewimage: {\n    height: 200,\n    left: 10,\n    right: 10,\n    bottom: 70,\n    position: 'absolute'\n  },\n  deleteButton: {\n    borderRadius: 100,\n    backgroundColor: 'white',\n    width: 25,\n    height: 25,\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'absolute',\n    margin: 10\n  }\n});\nexport default CreateComment;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","TextInput","StyleSheet","TouchableOpacity","Image","ActivityIndicator","Keyboard","collection","addDoc","serverTimestamp","doc","updateDoc","getDoc","db","app","useSelector","ImagePicker","FontAwesome","getStorage","ref","uploadBytes","getDownloadURL","jsx","_jsx","jsxs","_jsxs","CreateComment","_ref","postId","tag","setTag","_useState","_useState2","_slicedToArray","reply","setReply","userId","state","userProfile","_useState3","_useState4","image","setImage","_useState5","_useState6","loading","setLoading","replyInputRef","tagName","dismiss","setTimeout","current","focus","length","handleCommentSubmit","trim","addComment","_ref2","_asyncToGenerator","comment","commentRef","handleImageUpload","_ref3","storage","storageRef","Date","now","response","fetch","blob","uploadTask","downloadURL","_x3","apply","arguments","updateComment","_ref4","commentId","commentSnapshot","commentData","data","repliesArray","commentReplies","push","timestamp","tagId","error","alert","console","_x","_x2","selectImage","_ref5","permissionResult","requestMediaLibraryPermissionsAsync","granted","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","canceled","uri","handleDeleteImage","style","styles","bottomnav","children","viewimage","source","setimage","onPress","deleteButton","name","size","color","attachmentIcon","topicInput","placeholder","onChangeText","value","maxLength","create","position","left","right","bottom","padding","backgroundColor","flexDirection","borderTopWidth","borderTopColor","borderWidth","borderColor","borderRadius","flex","height","width","marginVertical","alignItems","justifyContent","margin"],"sources":["C:/Users/Alus/Downloads/Campus-Vibes-V1-main/Campus-Vibes-V1-main/mobile/screens/CreateComment.js"],"sourcesContent":["import { React, useState, useEffect, useRef} from \"react\";\nimport { View, TextInput, StyleSheet, TouchableOpacity, Image, ActivityIndicator, Keyboard } from 'react-native';\nimport { collection, addDoc, serverTimestamp, doc, updateDoc, getDoc} from 'firebase/firestore';\nimport { db, app} from '../firebase/firebase';\nimport { useSelector } from \"react-redux\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { getStorage, ref, uploadBytes, getDownloadURL} from 'firebase/storage';\n\n\nconst CreateComment = ({postId, tag, setTag}) => {\n    const [reply, setReply] = useState('');\n    const userId = useSelector((state) => state.userProfile.userId);\n    const [image, setImage] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const replyInputRef = useRef(null);\n   \n    useEffect(() => {\n      if (tag) {\n        setReply(`@${tag.tagName}, `);\n  \n        // Use Keyboard.dismiss() and setTimeout to show the keyboard after a short delay\n        Keyboard.dismiss();\n        setTimeout(() => {\n          if (replyInputRef.current) {\n            replyInputRef.current.focus();\n          }\n        }, 100);\n      }\n    }, [tag]);\n\n    useEffect(() => {\n      if (reply.length === 0) {\n        setTag(null);\n      }\n    }, [reply]);\n    \n\n    //   Send comments to subcollection\n    const handleCommentSubmit = () => {\n      if (reply.trim() !== '') {\n        const addComment = async (postId, comment) => {\n          try {\n            const commentRef = collection(db, 'Posts', postId, 'comments');\n            const handleImageUpload = async (image) => {\n              setLoading(true);\n              const storage = getStorage(app);\n              const storageRef = ref(storage, `images/${Date.now()}_${image}`);\n              \n              // Fetch image data\n              const response = await fetch(image);\n              const blob = await response.blob();\n              \n              // Upload image data to Firebase Storage\n              const uploadTask = uploadBytes(storageRef, blob);\n              await uploadTask;\n              \n              // Get the download URL for the uploaded image\n              const downloadURL = await getDownloadURL(storageRef);\n              return downloadURL;\n            };\n\n            // Update existing coment when replying\n            const updateComment = async() =>{\n              const commentRef = doc(db, 'Posts', tag.postId, 'comments', tag.commentId);\n              const commentSnapshot = await getDoc(commentRef);\n              const commentData = commentSnapshot.data();\n              const repliesArray = commentData?.commentReplies || [];\n              repliesArray.push(userId);\n\n             // Update the comment document with the new 'replies' array\n             await updateDoc(commentRef, {\n               commentReplies: repliesArray,\n              });\n            }\n\n            if(tag){\n              updateComment();\n            }\n            \n            let downloadURL = '';\n            if (image){\n            downloadURL = await handleImageUpload(image);\n            }\n\n            await addDoc(commentRef, {\n              userId,\n              reply,\n              downloadURL,\n              timestamp: serverTimestamp(),\n              tag: { tagId: tag ? tag.tagId : null, tagName: tag ? tag.tagName : null },\n            });\n  \n            // alert('Comment added successfully')\n          } catch (error) {\n            alert('Failed to add comment')\n            console.error('Error adding comment: ', error);\n          }\n        };\n        addComment(postId, reply, image);\n        setReply('');\n        setImage(null);\n        setTag(null)\n      }\n    };\n\n    const selectImage = async () => {\n      let permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (permissionResult.granted === false) {\n        alert('Permission to access camera roll is required!');\n        return;\n      }\n    \n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1,\n      });\n    \n      if (!result.canceled) {\n        setImage(result.uri);\n      }\n    };\n    const handleDeleteImage = () => {\n        setImage(null);\n      };\n      \n\n  return (\n    <View style={styles.bottomnav}>\n        {image && (\n         <View style={styles.viewimage}>\n             <Image source={{ uri: image }} style={styles.setimage} />\n             <TouchableOpacity onPress={handleDeleteImage} style={styles.deleteButton}>\n                  <FontAwesome name=\"times\" size={20} color=\"#2696b8\" />\n               </TouchableOpacity>\n           </View>\n        )}\n      <TouchableOpacity onPress={selectImage} style={styles.attachmentIcon}>\n         <FontAwesome name=\"image\" size={20} color=\"rgba(38, 150,184,0.7)\" />\n      </TouchableOpacity>\n      <TextInput \n        ref={replyInputRef}\n        style={styles.topicInput}\n        placeholder=\"Join the conversation\"\n        onChangeText={setReply}\n        value={reply}\n        maxLength={300}\n      />\n      <TouchableOpacity onPress={handleCommentSubmit}style={styles.attachmentIcon}>\n        {loading ? (<ActivityIndicator />) \n          :( <FontAwesome name=\"send-o\" size={20} color=\"rgba(38, 150,184,0.7)\" />)}\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n    bottomnav:{\n        position: 'absolute', left: 0, right: 0, bottom: 0,\n        padding: 10, backgroundColor: 'white',\n        flexDirection: 'row', borderTopWidth:3, borderTopColor: '#f8f8f8',\n    },\n    topicInput:{\n        borderWidth: 1, borderColor: '#f0f0f0', borderRadius: 10,\n        padding: 10,  flex: 1,\n    },\n    attachmentIcon: {\n        height: 30,\n        width: 35,\n        marginVertical: 10,\n        alignItems: 'center', justifyContent: 'center'\n        \n    },\n    setimage:{\n         height: 200,\n         borderRadius: 20,\n    },\n    viewimage:{\n        height: 200,\n        left: 10, right: 10,bottom: 70, \n       position: 'absolute',\n   },\n   deleteButton:{\n    borderRadius: 100, backgroundColor: 'white',\n     width: 25, height:25,\n    alignItems: 'center', justifyContent: 'center',\n    position:'absolute', margin:10,\n  },\n    \n});\n\nexport default CreateComment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}