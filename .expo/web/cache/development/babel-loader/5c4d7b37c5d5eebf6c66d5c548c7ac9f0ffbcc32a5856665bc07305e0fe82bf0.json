{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { React, useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { db } from \"../firebase/firebase\";\nimport { useSelector } from \"react-redux\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CreateComment = function CreateComment(_ref) {\n  var postId = _ref.postId;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    reply = _useState2[0],\n    setReply = _useState2[1];\n  var userId = useSelector(function (state) {\n    return state.userProfile.userId;\n  });\n  var handleCommentSubmit = function handleCommentSubmit() {\n    if (reply.trim() !== '') {\n      var addComment = function () {\n        var _ref2 = _asyncToGenerator(function* (postId, comment) {\n          try {\n            var commentRef = collection(db, 'Posts', postId, 'comments');\n            yield addDoc(commentRef, {\n              userId: userId,\n              reply: reply,\n              image: image,\n              timestamp: serverTimestamp()\n            });\n          } catch (error) {\n            alert('Failed to add comment');\n            console.error('Error adding comment: ', error);\n          }\n        });\n        return function addComment(_x, _x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n      addComment(postId, reply, image);\n      setReply('');\n      setImage(null);\n    }\n  };\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    image = _useState4[0],\n    setImage = _useState4[1];\n  var selectImage = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var permissionResult = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (permissionResult.granted === false) {\n        alert('Permission to access camera roll is required!');\n        return;\n      }\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1\n      });\n      if (!result.cancelled) {\n        setImage(result.uri);\n      }\n    });\n    return function selectImage() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleDeleteImage = function handleDeleteImage() {\n    setImage(null);\n  };\n  return _jsxs(View, {\n    style: styles.bottomnav,\n    children: [image && _jsxs(View, {\n      style: styles.viewimage,\n      children: [_jsx(Image, {\n        source: {\n          uri: image\n        },\n        style: styles.setimage\n      }), _jsx(TouchableOpacity, {\n        onPress: handleDeleteImage,\n        style: styles.deleteButton,\n        children: _jsx(FontAwesome, {\n          name: \"times\",\n          size: 20,\n          color: \"#2696b8\"\n        })\n      })]\n    }), _jsx(TouchableOpacity, {\n      onPress: selectImage,\n      style: styles.attachmentIcon,\n      children: _jsx(FontAwesome, {\n        name: \"image\",\n        size: 20,\n        color: \"rgba(38, 150,184,0.7)\"\n      })\n    }), _jsx(TextInput, {\n      style: styles.topicInput,\n      placeholder: \"Join the conversation\",\n      onChangeText: setReply,\n      value: reply,\n      maxLength: 300\n    }), _jsx(TouchableOpacity, {\n      onPress: handleCommentSubmit,\n      style: styles.attachmentIcon,\n      children: _jsx(FontAwesome, {\n        name: \"send-o\",\n        size: 20,\n        color: \"rgba(38, 150,184,0.7)\"\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  bottomnav: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 10,\n    backgroundColor: 'white',\n    flexDirection: 'row',\n    borderTopWidth: 3,\n    borderTopColor: '#f8f8f8'\n  },\n  topicInput: {\n    borderWidth: 1,\n    borderColor: '#f0f0f0',\n    borderRadius: 10,\n    padding: 10,\n    flex: 1\n  },\n  attachmentIcon: {\n    height: 30,\n    width: 35,\n    marginVertical: 10,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  setimage: {\n    height: 200,\n    borderRadius: 20\n  },\n  viewimage: {\n    height: 200,\n    left: 10,\n    right: 10,\n    bottom: 70,\n    position: 'absolute'\n  },\n  deleteButton: {\n    borderRadius: 100,\n    backgroundColor: 'white',\n    width: 25,\n    height: 25,\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'absolute',\n    margin: 10\n  }\n});\nexport default CreateComment;","map":{"version":3,"names":["React","useState","useEffect","View","TextInput","StyleSheet","TouchableOpacity","Image","collection","addDoc","serverTimestamp","db","useSelector","ImagePicker","FontAwesome","jsx","_jsx","jsxs","_jsxs","CreateComment","_ref","postId","_useState","_useState2","_slicedToArray","reply","setReply","userId","state","userProfile","handleCommentSubmit","trim","addComment","_ref2","_asyncToGenerator","comment","commentRef","image","timestamp","error","alert","console","_x","_x2","apply","arguments","setImage","_useState3","_useState4","selectImage","_ref3","permissionResult","requestMediaLibraryPermissionsAsync","granted","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","cancelled","uri","handleDeleteImage","style","styles","bottomnav","children","viewimage","source","setimage","onPress","deleteButton","name","size","color","attachmentIcon","topicInput","placeholder","onChangeText","value","maxLength","create","position","left","right","bottom","padding","backgroundColor","flexDirection","borderTopWidth","borderTopColor","borderWidth","borderColor","borderRadius","flex","height","width","marginVertical","alignItems","justifyContent","margin"],"sources":["C:/Users/muguc/OneDrive/Desktop/Campus Vibes/mobile/screens/CreateComment.js"],"sourcesContent":["import { React, useState, useEffect} from \"react\";\r\nimport { View, TextInput, StyleSheet, TouchableOpacity, Image } from 'react-native';\r\nimport { collection, addDoc, serverTimestamp} from 'firebase/firestore';\r\nimport { db } from '../firebase/firebase';\r\nimport { useSelector } from \"react-redux\";\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport { FontAwesome } from '@expo/vector-icons';\r\n\r\nconst CreateComment = ({postId}) => {\r\n    const [reply, setReply] = useState('');\r\n    const userId = useSelector((state) => state.userProfile.userId);\r\n\r\n    //   Send comments to subcollection\r\n    const handleCommentSubmit = () => {\r\n      if (reply.trim() !== '') {\r\n        const addComment = async (postId, comment) => {\r\n          try {\r\n            const commentRef = collection(db, 'Posts', postId, 'comments');\r\n            await addDoc(commentRef, {\r\n              userId,\r\n              reply,\r\n              image,\r\n              timestamp: serverTimestamp(),\r\n            }\r\n            );\r\n            // alert('Comment added successfully')\r\n          } catch (error) {\r\n            alert('Failed to add comment')\r\n            console.error('Error adding comment: ', error);\r\n          }\r\n        };\r\n        addComment(postId, reply, image);\r\n        setReply('');\r\n        setImage(null);\r\n      }\r\n    };\r\n\r\n    const [image, setImage] = useState(null);\r\n\r\n    const selectImage = async () => {\r\n      let permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n      if (permissionResult.granted === false) {\r\n        alert('Permission to access camera roll is required!');\r\n        return;\r\n      }\r\n    \r\n      let result = await ImagePicker.launchImageLibraryAsync({\r\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n        allowsEditing: true,\r\n        aspect: [4, 3],\r\n        quality: 1,\r\n      });\r\n    \r\n      if (!result.cancelled) {\r\n        setImage(result.uri);\r\n      }\r\n    };\r\n    const handleDeleteImage = () => {\r\n        setImage(null);\r\n      };\r\n      \r\n\r\n  return (\r\n    <View style={styles.bottomnav}>\r\n        {image && (\r\n         <View style={styles.viewimage}>\r\n             <Image source={{ uri: image }} style={styles.setimage} />\r\n             <TouchableOpacity onPress={handleDeleteImage} style={styles.deleteButton}>\r\n                  <FontAwesome name=\"times\" size={20} color=\"#2696b8\" />\r\n               </TouchableOpacity>\r\n           </View>\r\n        )}\r\n      <TouchableOpacity onPress={selectImage} style={styles.attachmentIcon}>\r\n         <FontAwesome name=\"image\" size={20} color=\"rgba(38, 150,184,0.7)\" />\r\n      </TouchableOpacity>\r\n      <TextInput \r\n        style={styles.topicInput}\r\n        placeholder=\"Join the conversation\"\r\n        onChangeText={setReply}\r\n        value={reply}\r\n        maxLength={300}\r\n      />\r\n      <TouchableOpacity onPress={handleCommentSubmit}style={styles.attachmentIcon}>\r\n        <FontAwesome name=\"send-o\" size={20} color=\"rgba(38, 150,184,0.7)\" />\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    bottomnav:{\r\n        position: 'absolute', left: 0, right: 0, bottom: 0,\r\n        padding: 10, backgroundColor: 'white',\r\n        flexDirection: 'row', borderTopWidth:3, borderTopColor: '#f8f8f8'\r\n    \r\n    },\r\n    topicInput:{\r\n        borderWidth: 1, borderColor: '#f0f0f0', borderRadius: 10,\r\n        padding: 10,  flex: 1,\r\n    },\r\n    attachmentIcon: {\r\n        height: 30,\r\n        width: 35,\r\n        marginVertical: 10,\r\n        alignItems: 'center', justifyContent: 'center'\r\n        \r\n    },\r\n    setimage:{\r\n         height: 200,\r\n         borderRadius: 20,\r\n    },\r\n    viewimage:{\r\n        height: 200,\r\n        left: 10, right: 10,bottom: 70, \r\n       position: 'absolute',\r\n   },\r\n   deleteButton:{\r\n    borderRadius: 100, backgroundColor: 'white',\r\n     width: 25, height:25,\r\n    alignItems: 'center', justifyContent: 'center',\r\n    position:'absolute', margin:10,\r\n  },\r\n    \r\n});\r\n\r\nexport default CreateComment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}