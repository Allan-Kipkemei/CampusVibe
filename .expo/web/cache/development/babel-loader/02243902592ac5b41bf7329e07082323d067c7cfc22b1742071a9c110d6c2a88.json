{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport VirtualizedList from \"react-native-web/dist/exports/VirtualizedList\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport Topnav from \"../components/Topnav\";\nimport Destyevents1 from \"../components/Destyevents1\";\nimport Snippet from \"../components/snippet\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport Search from \"../components/search.js\";\nimport { db } from \"../firebase/firebase\";\nimport { onSnapshot, collection, orderBy, query, where } from \"firebase/firestore\";\nimport CampusModal from \"../components/filterTopButton\";\nimport { useSelector } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Feed = function Feed() {\n  var navigation = useNavigation();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    posts = _useState2[0],\n    setPosts = _useState2[1];\n  var active = useSelector(function (state) {\n    return state.filter.filter;\n  });\n  useEffect(function () {\n    var q = query(collection(db, \"Posts\"), where(\"audience\", \"==\", active), orderBy(\"likes\", \"desc\"), orderBy(\"createdAt\", \"desc\"));\n    var unsubscribe = onSnapshot(q, function (snapshot) {\n      var postsData = snapshot.docs.map(function (doc) {\n        return _objectSpread(_objectSpread({}, doc.data()), {}, {\n          id: doc.id\n        });\n      });\n      setPosts(postsData);\n    });\n    return unsubscribe;\n  }, [active]);\n  var getItemCount = useCallback(function (data) {\n    return data.length;\n  }, []);\n  var getItem = useCallback(function (data, index) {\n    return data[index];\n  }, []);\n  var renderVirtualizedItem = useCallback(function (_ref) {\n    var item = _ref.item;\n    return _jsx(Snippet, {\n      post: item,\n      postId: item.id\n    });\n  }, []);\n  function handleFetchMorePosts() {}\n  useEffect(function () {\n    var backHandler = BackHandler.addEventListener(\"hardwareBackPress\", handleBackPress);\n    return function () {\n      return backHandler.remove();\n    };\n  }, []);\n  var handleBackPress = function handleBackPress() {\n    if (navigation.canGoBack()) {\n      navigation.goBack();\n    } else {\n      BackHandler.exitApp();\n    }\n    return true;\n  };\n  return _jsxs(View, {\n    style: styles.feed,\n    children: [_jsx(Topnav, {}), _jsx(StatusBar, {\n      barStyle: 'dark-content',\n      backgroundColor: '#ffff'\n    }), _jsx(VirtualizedList, {\n      showsVerticalScrollIndicator: false,\n      data: posts,\n      renderItem: renderVirtualizedItem,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      },\n      getItemCount: getItemCount,\n      getItem: getItem,\n      onEndReached: handleFetchMorePosts,\n      onEndReachedThreshold: 0.5,\n      contentContainerStyle: styles.flatListContent,\n      ListHeaderComponent: _jsx(Search, {})\n    }), _jsx(View, {\n      style: styles.bottomview\n    }), _jsx(Pressable, {\n      style: styles.createbtn,\n      onPress: function onPress() {\n        return navigation.navigate(\"CreatePost\");\n      },\n      children: _jsx(Image, {\n        style: styles.vectorIcon1,\n        resizeMode: \"cover\",\n        source: require(\"../assets/Create.png\")\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  flatListContent: {\n    flexDirection: \"column\",\n    marginTop: 3,\n    paddingBottom: 142\n  },\n  userProfile: {\n    zIndex: 2,\n    top: 65,\n    left: 10,\n    flexDirection: 'row'\n  },\n  userProfileImage: {\n    width: 30,\n    height: 30\n  },\n  names: {\n    flexDirection: 'column',\n    marginLeft: 10\n  },\n  uname: {\n    fontSize: 14,\n    fontWeight: 500\n  },\n  feedFlexBox: {\n    flex: 1,\n    overflow: \"hidden\"\n  },\n  headerPosition: {\n    left: 0,\n    position: \"absolute\"\n  },\n  vectorIconLayout: {\n    height: 20,\n    width: 20\n  },\n  flatList: {\n    marginTop: 3,\n    overflow: \"hidden\"\n  },\n  scrollview: {\n    top: 101,\n    height: 688,\n    alignItems: \"center\"\n  },\n  bottomview: {\n    top: 788\n  },\n  vectorIcon1: {\n    bottom: 70,\n    right: 20,\n    width: 50,\n    height: 50\n  },\n  createbtn: {\n    top: 718,\n    left: 311,\n    position: \"absolute\"\n  },\n  header: {\n    top: 0\n  },\n  feed: {\n    backgroundColor: \"#f8f8f8\",\n    width: \"100%\",\n    height: 852,\n    overflow: \"hidden\"\n  }\n});\nexport default Feed;","map":{"version":3,"names":["React","useState","useEffect","useCallback","View","StyleSheet","Pressable","Image","Text","VirtualizedList","BackHandler","StatusBar","Topnav","Destyevents1","Snippet","useNavigation","Search","db","onSnapshot","collection","orderBy","query","where","CampusModal","useSelector","jsx","_jsx","jsxs","_jsxs","Feed","navigation","_useState","_useState2","_slicedToArray","posts","setPosts","active","state","filter","q","unsubscribe","snapshot","postsData","docs","map","doc","_objectSpread","data","id","getItemCount","length","getItem","index","renderVirtualizedItem","_ref","item","post","postId","handleFetchMorePosts","backHandler","addEventListener","handleBackPress","remove","canGoBack","goBack","exitApp","style","styles","feed","children","barStyle","backgroundColor","showsVerticalScrollIndicator","renderItem","keyExtractor","onEndReached","onEndReachedThreshold","contentContainerStyle","flatListContent","ListHeaderComponent","bottomview","createbtn","onPress","navigate","vectorIcon1","resizeMode","source","require","create","flexDirection","marginTop","paddingBottom","userProfile","zIndex","top","left","userProfileImage","width","height","names","marginLeft","uname","fontSize","fontWeight","feedFlexBox","flex","overflow","headerPosition","position","vectorIconLayout","flatList","scrollview","alignItems","bottom","right","header"],"sources":["C:/Users/muguc/OneDrive/Desktop/Campus Vibes/mobile/screens/Feed.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { View, StyleSheet, Pressable, Image, Text, VirtualizedList, BackHandler , StatusBar} from \"react-native\";\nimport Topnav from \"../components/Topnav\";\nimport Destyevents1 from \"../components/Destyevents1\";\nimport Snippet from \"../components/snippet\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport Search from \"../components/search.js\";\nimport { db } from '../firebase/firebase'\nimport { onSnapshot, collection, orderBy, query, where} from \"firebase/firestore\";\nimport CampusModal from \"../components/filterTopButton\";\nimport { useSelector } from 'react-redux';\n\n\n\n\nconst Feed = () => {\n  const navigation = useNavigation();\n  const [posts, setPosts] = useState([]);\n  const active = useSelector((state) => state.filter.filter);\n\n\n  useEffect(() => {\n    const q = query(collection(db, \"Posts\"),\n                  where(\"audience\", \"==\", active), \n                  orderBy(\"likes\", \"desc\"), \n                  orderBy(\"createdAt\", \"desc\"));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const postsData = snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }));\n      setPosts(postsData);\n    });\n    return unsubscribe;\n  }, [active]);\n  \n  \n\n  \n  const getItemCount = useCallback((data) => data.length, []);\n  const getItem = useCallback((data, index) => data[index], []);\n  const renderVirtualizedItem = useCallback(({ item }) => (\n    <Snippet post={item} postId={item.id} />\n  ), []);\n  \n  function handleFetchMorePosts() {\n    // implement your logic here to fetch more posts\n  }\n\n  // Backhandler only in the feed\n  useEffect(() => {\n    const backHandler = BackHandler.addEventListener(\n      \"hardwareBackPress\",\n      handleBackPress\n    );\n    return () => backHandler.remove();\n  }, []);\n  const handleBackPress = () => {\n    if (navigation.canGoBack()) {\n      navigation.goBack();\n    } else {\n      BackHandler.exitApp();\n    }\n    return true;\n  };\n  \n  return (\n    <View style={styles.feed}>\n      <Topnav />\n      <StatusBar barStyle={'dark-content'} backgroundColor={'#ffff'}/>\n      {/* <CampusModal /> */}\n      <VirtualizedList\n        showsVerticalScrollIndicator={false}\n        data={posts}\n        renderItem={renderVirtualizedItem}\n        keyExtractor={(item) => item.id}\n        getItemCount={getItemCount}\n        getItem={getItem}\n        onEndReached={handleFetchMorePosts}\n        onEndReachedThreshold={0.5}\n        contentContainerStyle={styles.flatListContent}\n        ListHeaderComponent={<Search />}\n      />\n      <View style={styles.bottomview} />\n      <Pressable\n        style={styles.createbtn}\n        onPress={() => navigation.navigate(\"CreatePost\")}\n      >\n        <Image\n          style={styles.vectorIcon1}\n          resizeMode=\"cover\"\n          source={require(\"../assets/Create.png\")}\n        />\n      </Pressable>\n    </View>\n  );\n};\n\n\nconst styles = StyleSheet.create({\n  flatListContent: {\n    flexDirection: \"column\",\n    marginTop: 3, paddingBottom: 142,\n  },\n  userProfile:{\n    // position:'absolute', \n    zIndex: 2, top: 65, left: 10,\n    flexDirection: 'row',\n  },\n  userProfileImage:{\n    width: 30, height: 30,\n  },\n  names:{\n    flexDirection: 'column', marginLeft: 10,\n  },\n  uname:{\n    fontSize: 14, fontWeight: 500,\n  },\n  feedFlexBox: {\n    flex: 1,\n    overflow: \"hidden\",\n  },\n  headerPosition: {\n    left: 0,\n    position: \"absolute\",\n  },\n  vectorIconLayout: {\n    height: 20,\n    width: 20,\n  },\n  flatList: {\n    marginTop: 3,\n    overflow: \"hidden\",\n  },\n  scrollview: {\n    top: 101,\n    height: 688,\n    alignItems: \"center\",\n  },\n  bottomview: {\n    top: 788,\n  },\n  vectorIcon1: {\n    bottom: 70, right: 20,\n    width: 50,\n    height: 50,\n  },\n  createbtn: {\n    top: 718,\n    left: 311,\n    position: \"absolute\",\n  },\n  header: {\n    top: 0,\n  },\n  feed: {\n    backgroundColor: \"#f8f8f8\",\n    width: \"100%\",\n    height: 852,\n    overflow: \"hidden\",\n  },\n});\n\nexport default Feed;\n"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,SAAA;AAAA,OAAAC,KAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,eAAA;AAAA,OAAAC,WAAA;AAAA,OAAAC,SAAA;AAEhE,OAAOC,MAAM;AACb,OAAOC,YAAY;AACnB,OAAOC,OAAO;AACd,SAASC,aAAa,QAAQ,0BAA0B;AACxD,OAAOC,MAAM;AACb,SAASC,EAAE;AACX,SAASC,UAAU,EAAEC,UAAU,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,QAAO,oBAAoB;AACjF,OAAOC,WAAW;AAClB,SAASC,WAAW,QAAQ,aAAa;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAK1C,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAS;EACjB,IAAMC,UAAU,GAAGf,aAAa,EAAE;EAClC,IAAAgB,SAAA,GAA0B9B,QAAQ,CAAC,EAAE,CAAC;IAAA+B,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAMI,MAAM,GAAGZ,WAAW,CAAC,UAACa,KAAK;IAAA,OAAKA,KAAK,CAACC,MAAM,CAACA,MAAM;EAAA,EAAC;EAG1DpC,SAAS,CAAC,YAAM;IACd,IAAMqC,CAAC,GAAGlB,KAAK,CAACF,UAAU,CAACF,EAAE,EAAE,OAAO,CAAC,EACzBK,KAAK,CAAC,UAAU,EAAE,IAAI,EAAEc,MAAM,CAAC,EAC/BhB,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,EACxBA,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;IAC3C,IAAMoB,WAAW,GAAGtB,UAAU,CAACqB,CAAC,EAAE,UAACE,QAAQ,EAAK;MAC9C,IAAMC,SAAS,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAC,UAACC,GAAG;QAAA,OAAAC,aAAA,CAAAA,aAAA,KAAWD,GAAG,CAACE,IAAI,EAAE;UAAEC,EAAE,EAAEH,GAAG,CAACG;QAAE;MAAA,CAAG,CAAC;MAC7Eb,QAAQ,CAACO,SAAS,CAAC;IACrB,CAAC,CAAC;IACF,OAAOF,WAAW;EACpB,CAAC,EAAE,CAACJ,MAAM,CAAC,CAAC;EAKZ,IAAMa,YAAY,GAAG9C,WAAW,CAAC,UAAC4C,IAAI;IAAA,OAAKA,IAAI,CAACG,MAAM;EAAA,GAAE,EAAE,CAAC;EAC3D,IAAMC,OAAO,GAAGhD,WAAW,CAAC,UAAC4C,IAAI,EAAEK,KAAK;IAAA,OAAKL,IAAI,CAACK,KAAK,CAAC;EAAA,GAAE,EAAE,CAAC;EAC7D,IAAMC,qBAAqB,GAAGlD,WAAW,CAAC,UAAAmD,IAAA;IAAA,IAAGC,IAAI,GAAAD,IAAA,CAAJC,IAAI;IAAA,OAC/C7B,IAAA,CAACZ,OAAO;MAAC0C,IAAI,EAAED,IAAK;MAACE,MAAM,EAAEF,IAAI,CAACP;IAAG,EAAG;EAAA,CACzC,EAAE,EAAE,CAAC;EAEN,SAASU,oBAAoBA,CAAA,EAAG,CAEhC;EAGAxD,SAAS,CAAC,YAAM;IACd,IAAMyD,WAAW,GAAGjD,WAAW,CAACkD,gBAAgB,CAC9C,mBAAmB,EACnBC,eAAe,CAChB;IACD,OAAO;MAAA,OAAMF,WAAW,CAACG,MAAM,EAAE;IAAA;EACnC,CAAC,EAAE,EAAE,CAAC;EACN,IAAMD,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;IAC5B,IAAI/B,UAAU,CAACiC,SAAS,EAAE,EAAE;MAC1BjC,UAAU,CAACkC,MAAM,EAAE;IACrB,CAAC,MAAM;MACLtD,WAAW,CAACuD,OAAO,EAAE;IACvB;IACA,OAAO,IAAI;EACb,CAAC;EAED,OACErC,KAAA,CAACxB,IAAI;IAAC8D,KAAK,EAAEC,MAAM,CAACC,IAAK;IAAAC,QAAA,GACvB3C,IAAA,CAACd,MAAM,KAAG,EACVc,IAAA,CAACf,SAAS;MAAC2D,QAAQ,EAAE,cAAe;MAACC,eAAe,EAAE;IAAQ,EAAE,EAEhE7C,IAAA,CAACjB,eAAe;MACd+D,4BAA4B,EAAE,KAAM;MACpCzB,IAAI,EAAEb,KAAM;MACZuC,UAAU,EAAEpB,qBAAsB;MAClCqB,YAAY,EAAE,SAAAA,aAACnB,IAAI;QAAA,OAAKA,IAAI,CAACP,EAAE;MAAA,CAAC;MAChCC,YAAY,EAAEA,YAAa;MAC3BE,OAAO,EAAEA,OAAQ;MACjBwB,YAAY,EAAEjB,oBAAqB;MACnCkB,qBAAqB,EAAE,GAAI;MAC3BC,qBAAqB,EAAEV,MAAM,CAACW,eAAgB;MAC9CC,mBAAmB,EAAErD,IAAA,CAACV,MAAM;IAAI,EAChC,EACFU,IAAA,CAACtB,IAAI;MAAC8D,KAAK,EAAEC,MAAM,CAACa;IAAW,EAAG,EAClCtD,IAAA,CAACpB,SAAS;MACR4D,KAAK,EAAEC,MAAM,CAACc,SAAU;MACxBC,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAMpD,UAAU,CAACqD,QAAQ,CAAC,YAAY,CAAC;MAAA,CAAC;MAAAd,QAAA,EAEjD3C,IAAA,CAACnB,KAAK;QACJ2D,KAAK,EAAEC,MAAM,CAACiB,WAAY;QAC1BC,UAAU,EAAC,OAAO;QAClBC,MAAM,EAAEC,OAAO;MAAyB;IACxC,EACQ;EAAA,EACP;AAEX,CAAC;AAGD,IAAMpB,MAAM,GAAG9D,UAAU,CAACmF,MAAM,CAAC;EAC/BV,eAAe,EAAE;IACfW,aAAa,EAAE,QAAQ;IACvBC,SAAS,EAAE,CAAC;IAAEC,aAAa,EAAE;EAC/B,CAAC;EACDC,WAAW,EAAC;IAEVC,MAAM,EAAE,CAAC;IAAEC,GAAG,EAAE,EAAE;IAAEC,IAAI,EAAE,EAAE;IAC5BN,aAAa,EAAE;EACjB,CAAC;EACDO,gBAAgB,EAAC;IACfC,KAAK,EAAE,EAAE;IAAEC,MAAM,EAAE;EACrB,CAAC;EACDC,KAAK,EAAC;IACJV,aAAa,EAAE,QAAQ;IAAEW,UAAU,EAAE;EACvC,CAAC;EACDC,KAAK,EAAC;IACJC,QAAQ,EAAE,EAAE;IAAEC,UAAU,EAAE;EAC5B,CAAC;EACDC,WAAW,EAAE;IACXC,IAAI,EAAE,CAAC;IACPC,QAAQ,EAAE;EACZ,CAAC;EACDC,cAAc,EAAE;IACdZ,IAAI,EAAE,CAAC;IACPa,QAAQ,EAAE;EACZ,CAAC;EACDC,gBAAgB,EAAE;IAChBX,MAAM,EAAE,EAAE;IACVD,KAAK,EAAE;EACT,CAAC;EACDa,QAAQ,EAAE;IACRpB,SAAS,EAAE,CAAC;IACZgB,QAAQ,EAAE;EACZ,CAAC;EACDK,UAAU,EAAE;IACVjB,GAAG,EAAE,GAAG;IACRI,MAAM,EAAE,GAAG;IACXc,UAAU,EAAE;EACd,CAAC;EACDhC,UAAU,EAAE;IACVc,GAAG,EAAE;EACP,CAAC;EACDV,WAAW,EAAE;IACX6B,MAAM,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IACrBjB,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE;EACV,CAAC;EACDjB,SAAS,EAAE;IACTa,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,GAAG;IACTa,QAAQ,EAAE;EACZ,CAAC;EACDO,MAAM,EAAE;IACNrB,GAAG,EAAE;EACP,CAAC;EACD1B,IAAI,EAAE;IACJG,eAAe,EAAE,SAAS;IAC1B0B,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,GAAG;IACXQ,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;AAEF,eAAe7E,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}