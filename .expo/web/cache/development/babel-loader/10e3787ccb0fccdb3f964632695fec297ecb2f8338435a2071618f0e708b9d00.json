{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { collection, doc, updateDoc, Timestamp } from 'firebase/firestore';\nimport * as ImagePicker from 'expo-image-picker';\nimport { db } from \"../firebase/firebase\";\nimport { useSelector } from 'react-redux';\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CampusModal = function CampusModal() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    modalVisible = _useState2[0],\n    setModalVisible = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    image = _useState4[0],\n    setImage = _useState4[1];\n  var campus = useSelector(function (state) {\n    return state.campus;\n  });\n  var handleImagePick = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n        status = _yield$ImagePicker$re.status;\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n        return;\n      }\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 1\n      });\n      if (!result.canceled) {\n        setImage(result.uri);\n      }\n    });\n    return function handleImagePick() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleImageUpdate = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var campusRef = doc(db, 'campus', campus.id);\n      try {\n        yield updateDoc(campusRef, {\n          profile: image,\n          updatedAt: Timestamp.now()\n        });\n        alert('Profile image updated successfully!');\n        setModalVisible(false);\n      } catch (error) {\n        console.error(error);\n        alert('Error updating profile image.');\n      }\n    });\n    return function handleImageUpdate() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return setModalVisible(true);\n      },\n      children: _jsx(FontAwesome5, {\n        name: \"upload\",\n        color: \"#c0c0c0\",\n        size: 14\n      })\n    }), _jsx(Modal, {\n      animationType: \"slide\",\n      visible: modalVisible,\n      onRequestClose: function onRequestClose() {\n        return setModalVisible(false);\n      },\n      children: _jsxs(View, {\n        style: styles.modalContainer,\n        children: [_jsx(TouchableOpacity, {\n          style: styles.imageContainer,\n          onPress: handleImagePick,\n          children: image ? _jsx(Image, {\n            source: {\n              uri: image\n            },\n            style: styles.image,\n            resizeMode: \"cover\"\n          }) : _jsx(Text, {\n            style: styles.text,\n            children: \"Select a profile image\"\n          })\n        }), _jsxs(View, {\n          style: styles.buttonContainer,\n          children: [_jsx(Button, {\n            title: \"Update\",\n            onPress: handleImageUpdate\n          }), _jsx(Button, {\n            title: \"Cancel\",\n            onPress: function onPress() {\n              return setModalVisible(false);\n            }\n          })]\n        })]\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: 'center'\n  },\n  modalContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#fff'\n  },\n  imageContainer: {\n    width: '100%',\n    height: 300,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#eaeaea'\n  },\n  image: {\n    width: '100%',\n    height: '100%'\n  },\n  text: {\n    fontSize: 16,\n    color: '#888'\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20,\n    width: '80%'\n  }\n});\nexport default CampusModal;","map":{"version":3,"names":["React","useState","View","Text","Image","TouchableOpacity","Modal","Button","StyleSheet","collection","doc","updateDoc","Timestamp","ImagePicker","db","useSelector","FontAwesome5","jsx","_jsx","jsxs","_jsxs","CampusModal","_useState","_useState2","_slicedToArray","modalVisible","setModalVisible","_useState3","_useState4","image","setImage","campus","state","handleImagePick","_ref","_asyncToGenerator","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","alert","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","canceled","uri","apply","arguments","handleImageUpdate","_ref2","campusRef","id","profile","updatedAt","now","error","console","style","styles","container","children","onPress","name","color","size","animationType","visible","onRequestClose","modalContainer","imageContainer","source","resizeMode","text","buttonContainer","title","create","alignItems","flex","justifyContent","backgroundColor","width","height","fontSize","flexDirection","marginTop"],"sources":["C:/Users/Alus/Downloads/Campus-Vibes-V1-main/Campus-Vibes-V1-main/mobile/screens/CampusProfile.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, Text, Image, TouchableOpacity, Modal, Button, StyleSheet } from 'react-native';\nimport { collection, doc, updateDoc, Timestamp } from 'firebase/firestore';\nimport * as ImagePicker from 'expo-image-picker';\nimport {db} from '../firebase/firebase';\nimport { useSelector } from 'react-redux';\nimport { FontAwesome5 } from '@expo/vector-icons';\n\nconst CampusModal = () => {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [image, setImage] = useState(null);\n  const campus = useSelector((state) => state.campus);\n\n  const handleImagePick = async () => {\n    const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n    if (status !== 'granted') {\n      alert('Sorry, we need camera roll permissions to make this work!');\n      return;\n    }\n    const result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [16, 9],\n      quality: 1,\n    });\n    if (!result.canceled) {\n      setImage(result.uri);\n    }\n  };\n\n  const handleImageUpdate = async () => {\n    const campusRef = doc(db, 'campus', campus.id);\n    try {\n      await updateDoc(campusRef, { profile: image, updatedAt: Timestamp.now() });\n      alert('Profile image updated successfully!');\n      setModalVisible(false);\n    } catch (error) {\n      console.error(error);\n      alert('Error updating profile image.');\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <TouchableOpacity onPress={() => setModalVisible(true)}>\n        <FontAwesome5 name=\"upload\" color=\"#c0c0c0\" size={14} />\n      </TouchableOpacity>\n      <Modal animationType=\"slide\" visible={modalVisible} onRequestClose={() => setModalVisible(false)}>\n        <View style={styles.modalContainer}>\n          <TouchableOpacity style={styles.imageContainer} onPress={handleImagePick}>\n            {image ? (\n              <Image source={{ uri: image }} style={styles.image} resizeMode=\"cover\" />\n            ) : (\n              <Text style={styles.text}>Select a profile image</Text>\n            )}\n          </TouchableOpacity>\n          <View style={styles.buttonContainer}>\n            <Button title=\"Update\" onPress={handleImageUpdate} />\n            <Button title=\"Cancel\" onPress={() => setModalVisible(false)} />\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n  },\n  modalContainer: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#fff',\n  },\n  imageContainer: {\n    width: '100%',\n    height: 300,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#eaeaea',\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n  },\n  text: {\n    fontSize: 16,\n    color: '#888',\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20,\n    width: '80%',\n  },\n});\n\nexport default CampusModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}