{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useEffect, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Snippet from \"../components/snippet\";\nimport { useSelector } from 'react-redux';\nimport { db } from \"../firebase/firebase\";\nimport { collection, query, where, onSnapshot, orderBy } from 'firebase/firestore';\nimport { Picker } from \"@react-native-picker/picker\";\nimport { FontAwesome } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RadioPickerItem = function RadioPickerItem(_ref) {\n  var label = _ref.label,\n    value = _ref.value,\n    isSelected = _ref.isSelected,\n    _onPress = _ref.onPress;\n  return _jsxs(TouchableOpacity, {\n    style: styles.radioButton,\n    onPress: function onPress() {\n      return _onPress(value);\n    },\n    children: [_jsx(View, {\n      style: [styles.radioButtonIcon, isSelected && styles.radioButtonIconSelected]\n    }), _jsx(Text, {\n      style: [styles.radioText, isSelected && styles.radioActiveText],\n      children: label\n    })]\n  });\n};\nvar Posts = function Posts(_ref2) {\n  var setTopicCount = _ref2.setTopicCount,\n    userId = _ref2.userId;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    posts = _useState2[0],\n    setPosts = _useState2[1];\n  var _useState3 = useState('latest'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    sortingOption = _useState4[0],\n    setSortingOption = _useState4[1];\n  var userProfile = useSelector(function (state) {\n    return state.userProfile;\n  });\n  useEffect(function () {\n    var postsQuery;\n    var fetchPosts = function () {\n      var _ref3 = _asyncToGenerator(function* () {\n        switch (sortingOption) {\n          case 'latest':\n            postsQuery = query(collection(db, 'Posts'), where('userId', '==', userId), orderBy('createdAt', 'desc'));\n            break;\n          case 'earliest':\n            postsQuery = query(collection(db, 'Posts'), where('userId', '==', userId), orderBy('createdAt', 'asc'));\n            break;\n          case 'top':\n            postsQuery = query(collection(db, 'Posts'), where('userId', '==', userId), orderBy('likes', 'asc'));\n            break;\n          default:\n            postsQuery = query(collection(db, 'Posts'), where('userId', '==', userId), orderBy('createdAt', 'desc'));\n        }\n        var unsubscribePosts = onSnapshot(postsQuery, function (querySnapshot) {\n          var fetchedPosts = [];\n          querySnapshot.forEach(function (doc) {\n            fetchedPosts.push(_objectSpread({\n              id: doc.id\n            }, doc.data()));\n          });\n          setPosts(fetchedPosts);\n          setTopicCount(querySnapshot.size);\n        });\n        return function () {\n          unsubscribePosts();\n        };\n      });\n      return function fetchPosts() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    fetchPosts();\n  }, [sortingOption, userId]);\n  var renderPickerItems = function renderPickerItems() {\n    var sortingOptions = [{\n      label: 'Latest',\n      value: 'latest'\n    }, {\n      label: 'Earliest',\n      value: 'earliest'\n    }, {\n      label: 'Top',\n      value: 'top'\n    }];\n    return sortingOptions.map(function (option) {\n      return _jsx(RadioPickerItem, {\n        label: option.label,\n        value: option.value,\n        isSelected: sortingOption === option.value,\n        onPress: setSortingOption\n      }, option.value);\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(ScrollView, {\n      horizontal: true,\n      contentContainerStyle: styles.sort,\n      showsHorizontalScrollIndicator: false,\n      children: [_jsx(Text, {\n        style: styles.header,\n        children: \"Sort\"\n      }), renderPickerItems()]\n    }), _jsx(FlatList, {\n      data: posts,\n      renderItem: function renderItem(_ref4) {\n        var item = _ref4.item;\n        return _jsx(Snippet, {\n          post: item,\n          postId: item.id\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      scrollEnabled: false,\n      contentContainerStyle: styles.flatListContent\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#f0f0f0'\n  },\n  sort: {\n    borderWidth: 1,\n    margin: 2,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    flexDirection: 'row',\n    paddingHorizontal: 100,\n    height: 35,\n    backgroundColor: '#ffff'\n  },\n  picker: {\n    width: 120\n  },\n  pickerItem: {\n    color: '#000'\n  },\n  radioButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 20\n  },\n  radioButtonIcon: {\n    width: 15,\n    height: 15,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#000',\n    marginRight: 8\n  },\n  radioButtonIconSelected: {\n    backgroundColor: '#000'\n  },\n  header: {\n    position: 'absolute',\n    left: 10\n  },\n  radioActiveText: {\n    color: '#000'\n  },\n  radioText: {\n    color: \"#707070\"\n  }\n});\nexport default Posts;","map":{"version":3,"names":["React","useEffect","useState","useCallback","View","StyleSheet","FlatList","Text","TouchableOpacity","ScrollView","Snippet","useSelector","db","collection","query","where","onSnapshot","orderBy","Picker","FontAwesome","jsx","_jsx","jsxs","_jsxs","RadioPickerItem","_ref","label","value","isSelected","onPress","style","styles","radioButton","children","radioButtonIcon","radioButtonIconSelected","radioText","radioActiveText","Posts","_ref2","setTopicCount","userId","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","sortingOption","setSortingOption","userProfile","state","postsQuery","fetchPosts","_ref3","_asyncToGenerator","unsubscribePosts","querySnapshot","fetchedPosts","forEach","doc","push","_objectSpread","id","data","size","apply","arguments","renderPickerItems","sortingOptions","map","option","container","horizontal","contentContainerStyle","sort","showsHorizontalScrollIndicator","header","renderItem","_ref4","item","post","postId","keyExtractor","toString","scrollEnabled","flatListContent","create","backgroundColor","borderWidth","margin","alignItems","justifyContent","flexDirection","paddingHorizontal","height","picker","width","pickerItem","color","marginRight","borderRadius","borderColor","position","left"],"sources":["C:/Users/Alus/Downloads/Campus-Vibes-V1-main/Campus-Vibes-V1-main/mobile/screens/Posts.js"],"sourcesContent":["import React, { useEffect, useState, useCallback} from 'react';\nimport { View, StyleSheet, FlatList, Text, TouchableOpacity, ScrollView} from 'react-native';\nimport Snippet from '../components/snippet';\nimport { useSelector } from 'react-redux';\nimport { db } from '../firebase/firebase';\nimport { collection, query, where, onSnapshot, orderBy } from 'firebase/firestore';\nimport { Picker } from \"@react-native-picker/picker\";\nimport { FontAwesome } from '@expo/vector-icons'\n\n\nconst RadioPickerItem = ({ label, value, isSelected, onPress }) => {\n  return (\n    <TouchableOpacity style={styles.radioButton} onPress={() => onPress(value)}>\n      <View style={[styles.radioButtonIcon, isSelected && styles.radioButtonIconSelected]} />\n      <Text style={[styles.radioText, isSelected && styles.radioActiveText]}>{label}</Text>\n    </TouchableOpacity>\n  );\n};\nconst Posts = ({ setTopicCount, userId }) => {\n  const [posts, setPosts] = useState([]);\n  const [sortingOption, setSortingOption] = useState('latest');\n  const userProfile = useSelector((state) => state.userProfile);\n\n  useEffect(() => {\n    let postsQuery;\n\n    const fetchPosts = async () => {\n      switch (sortingOption) {\n        case 'latest':\n          postsQuery = query(\n            collection(db, 'Posts'),\n            where('userId', '==', userId),\n            orderBy('createdAt', 'desc')\n          );\n          break;\n        case 'earliest':\n          postsQuery = query(\n            collection(db, 'Posts'),\n            where('userId', '==', userId),\n            orderBy('createdAt', 'asc')\n          );\n          break;\n        case 'top':\n          postsQuery = query(\n            collection(db, 'Posts'),\n            where('userId', '==', userId),\n            orderBy('likes', 'asc')\n          );\n          break;\n        default:\n          postsQuery = query(\n            collection(db, 'Posts'),\n            where('userId', '==', userId),\n            orderBy('createdAt', 'desc')\n          );\n      }\n\n      const unsubscribePosts = onSnapshot(postsQuery, (querySnapshot) => {\n        const fetchedPosts = [];\n        querySnapshot.forEach((doc) => {\n          fetchedPosts.push({ id: doc.id, ...doc.data() });\n        });\n        setPosts(fetchedPosts);\n        setTopicCount(querySnapshot.size);\n      });\n\n      return () => {\n        unsubscribePosts();\n      };\n    };\n\n    fetchPosts();\n  }, [sortingOption, userId]);\n\n  const renderPickerItems = () => {\n    const sortingOptions = [\n      { label: 'Latest', value: 'latest' },\n      { label: 'Earliest', value: 'earliest' },\n      { label: 'Top', value: 'top' },\n    ];\n\n    return sortingOptions.map((option) => (\n      <RadioPickerItem\n        key={option.value}\n        label={option.label}\n        value={option.value}\n        isSelected={sortingOption === option.value}\n        onPress={setSortingOption}\n      />\n    ));\n  };\n\n  return (\n    <View style={styles.container}>\n      <ScrollView\n        horizontal\n        contentContainerStyle={styles.sort}\n        showsHorizontalScrollIndicator={false}\n       >\n        <Text style={styles.header}>Sort</Text>\n        {renderPickerItems()}\n      </ScrollView>\n      <FlatList\n        data={posts}\n        renderItem={({ item }) => <Snippet post={item} postId={item.id} />}\n        keyExtractor={(item) => item.id.toString()}\n        scrollEnabled={false}\n        contentContainerStyle={styles.flatListContent}\n      />\n    </View>\n  );\n};\n\n\nconst styles = StyleSheet.create({\n  container:{\n    backgroundColor: '#f0f0f0'\n  },\n\n  sort:{\n    borderWidth: 1, margin:2,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    flexDirection: 'row',\n    paddingHorizontal: 100,\n    height:35,\n    backgroundColor: '#ffff', \n  },\n  picker:{\n    width: 120\n  },\n  pickerItem: {\n    // fontSize: 13, \n    color: '#000',\n  },\n  radioButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 20,\n  },\n  radioButtonIcon: {\n    width: 15,\n    height: 15,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: '#000',\n    marginRight: 8,\n  },\n  radioButtonIconSelected: {\n    backgroundColor: '#000',\n  },\n  header:{\n    position:'absolute', \n    left:10\n  },\n  radioActiveText:{\n    color: '#000'\n  },\n  radioText:{\n    color:\"#707070\"\n  }\n\n});\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}