{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { collection, doc, getDoc, getDocs } from 'firebase/firestore';\nimport { db } from \"../firebase/firebase\";\nimport { useNavigation } from '@react-navigation/native';\nimport { useSelector } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar FollowingFF = function FollowingFF(_ref) {\n  var MyUserId = _ref.MyUserId,\n    active = _ref.active,\n    screen = _ref.screen;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    followingProfiles = _useState2[0],\n    setFollowingProfiles = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var defaultProfileImage = require(\"../assets/graduate.png\");\n  var currentUserId = useSelector(function (state) {\n    return state.userProfile.userId;\n  });\n  useEffect(function () {\n    var fetchFollowingProfiles = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        setLoading(true);\n        try {\n          var followingQuerySnapshot = yield getDocs(collection(db, 'userProfiles', MyUserId, active));\n          var followingUserIds = followingQuerySnapshot.docs.map(function (doc) {\n            return doc.data().userId;\n          });\n          var followingProfilePromises = followingUserIds.map(function (userId) {\n            return getDoc(doc(db, 'userProfiles', userId)).then(function (snapshot) {\n              return {\n                userId: userId,\n                userProfile: snapshot.data()\n              };\n            }).catch(function (error) {\n              console.error(\"Error fetching user profile for user ID \" + userId + \":\", error);\n              return null;\n            });\n          });\n          setLoading(false);\n          var _followingProfiles = yield Promise.all(followingProfilePromises);\n          setFollowingProfiles(_followingProfiles);\n        } catch (error) {\n          console.error('Error fetching following profiles:', error);\n        }\n      });\n      return function fetchFollowingProfiles() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchFollowingProfiles();\n  }, [MyUserId]);\n  var navigation = useNavigation();\n  var handleNavigation = function handleNavigation(_ref3) {\n    var profile = _ref3.profile;\n    if (screen !== 'visitor') {\n      if (currentUserId !== profile.userId) {\n        navigation.replace('BottomTabsRoot', {\n          screen: 'VisitUserProfile',\n          params: {\n            postUserId: profile.userId\n          }\n        });\n      } else {\n        navigation.replace('BottomTabsRoot', {\n          screen: 'Account'\n        });\n      }\n    } else {\n      return null;\n    }\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [loading && _jsx(ActivityIndicator, {}), followingProfiles.map(function (profile) {\n      return _jsxs(TouchableOpacity, {\n        onPress: function onPress() {\n          return handleNavigation({\n            profile: profile\n          });\n        },\n        style: styles.profileContainer,\n        children: [_jsx(Image, {\n          source: typeof profile.userProfile.profileImageUrl === 'string' ? {\n            uri: profile.userProfile.profileImageUrl\n          } : defaultProfileImage,\n          style: styles.profileImage\n        }), _jsxs(View, {\n          style: styles.profileInfo,\n          children: [_jsx(Text, {\n            style: styles.username,\n            children: profile.userProfile.username\n          }), _jsx(Text, {\n            style: styles.field,\n            children: profile.userProfile.field\n          })]\n        })]\n      }, profile.userId);\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {},\n  profileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n    backgroundColor: '#ffff',\n    padding: 10\n  },\n  profileImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 10\n  },\n  profileInfo: {\n    flex: 1\n  },\n  username: {\n    fontWeight: '500'\n  },\n  field: {\n    color: '#888'\n  }\n});\nexport default FollowingFF;","map":{"version":3,"names":["React","useEffect","useState","View","TouchableOpacity","Image","Text","StyleSheet","ActivityIndicator","collection","doc","getDoc","getDocs","db","useNavigation","useSelector","jsx","_jsx","jsxs","_jsxs","FollowingFF","_ref","MyUserId","active","screen","_useState","_useState2","_slicedToArray","followingProfiles","setFollowingProfiles","_useState3","_useState4","loading","setLoading","defaultProfileImage","require","currentUserId","state","userProfile","userId","fetchFollowingProfiles","_ref2","_asyncToGenerator","followingQuerySnapshot","followingUserIds","docs","map","data","followingProfilePromises","then","snapshot","catch","error","console","Promise","all","apply","arguments","navigation","handleNavigation","_ref3","profile","replace","params","postUserId","style","styles","container","children","onPress","profileContainer","source","profileImageUrl","uri","profileImage","profileInfo","username","field","create","flexDirection","alignItems","marginBottom","backgroundColor","padding","width","height","borderRadius","marginRight","flex","fontWeight","color"],"sources":["C:/Users/Alus/Downloads/Campus-Vibes-V1-main/Campus-Vibes-V1-main/mobile/screens/FollowFF.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { View, TouchableOpacity, Image, Text, StyleSheet, ActivityIndicator } from 'react-native';\nimport { collection, doc, getDoc, getDocs } from 'firebase/firestore'; // Import the necessary Firestore functions\nimport { db } from '../firebase/firebase';\nimport { useNavigation } from '@react-navigation/native';\nimport { useSelector } from 'react-redux';\n\nconst FollowingFF = ({ MyUserId, active, screen}) => {\n  const [followingProfiles, setFollowingProfiles] = useState([]);\n  const [loading, setLoading] = useState(false)\n  const defaultProfileImage = require('../assets/graduate.png')\n  const currentUserId = useSelector((state => state.userProfile.userId))\n\n  useEffect(() => {\n    const fetchFollowingProfiles = async () => {\n      setLoading(true)\n      try {\n        const followingQuerySnapshot = await getDocs(\n          collection(db, 'userProfiles', MyUserId, active)\n        );\n\n        const followingUserIds = followingQuerySnapshot.docs.map(\n          (doc) => doc.data().userId\n        );\n\n        const followingProfilePromises = followingUserIds.map((userId) =>\n          getDoc(doc(db, 'userProfiles', userId))\n            .then((snapshot) => ({ userId, userProfile: snapshot.data() }))\n            .catch((error) => {\n              console.error(`Error fetching user profile for user ID ${userId}:`, error);\n              return null;\n            })\n        );\n        setLoading(false)\n        const followingProfiles = await Promise.all(followingProfilePromises);\n        setFollowingProfiles(followingProfiles);\n      } catch (error) {\n        console.error('Error fetching following profiles:', error);\n      }\n    };\n    \n    fetchFollowingProfiles();\n  }, [MyUserId]);\n\n\n  const navigation = useNavigation()\n\n  const handleNavigation = ({profile}) => {\n    if(screen !== 'visitor'){\n      if(currentUserId !== profile.userId){\n        navigation.replace('BottomTabsRoot', {\n         screen: 'VisitUserProfile',\n         params: { postUserId: profile.userId }\n       });\n     }else{\n       navigation.replace\n         ('BottomTabsRoot', {screen:'Account'})\n       }}\n       else{return null}\n     }\n\n  return (\n    <View style={styles.container}>\n      {loading  &&(\n        <ActivityIndicator />\n      )}\n      {followingProfiles.map((profile) => (\n        <TouchableOpacity\n          key={profile.userId}\n          onPress={() => handleNavigation({ profile })}\n          style={styles.profileContainer}\n        >\n          <Image\n            source={typeof profile.userProfile.profileImageUrl === 'string' ?\n            {uri: profile.userProfile.profileImageUrl } : defaultProfileImage} \n            style={styles.profileImage} />\n          <View style={styles.profileInfo}>\n            <Text style={styles.username}>{profile.userProfile.username}</Text>\n            <Text style={styles.field}>{profile.userProfile.field}</Text>\n          </View>\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    \n  },\n  profileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n    backgroundColor: '#ffff',\n    padding: 10,\n  },\n  profileImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 10,\n  },\n  profileInfo: {\n    flex: 1,\n  },\n  username: {\n    fontWeight: '500',\n  },\n  field: {\n    color: '#888',\n  },\n});\n\nexport default FollowingFF;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}