{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { orderBy, collection, query, startAt, limit, getDocs, endAt, where } from 'firebase/firestore';\nimport { db } from \"../firebase/firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar QuickModal = function QuickModal(_ref) {\n  var visible = _ref.visible,\n    onClose = _ref.onClose,\n    q = _ref.q;\n  var _useState = useState(new Animated.Value(-100)),\n    _useState2 = _slicedToArray(_useState, 1),\n    slideAnim = _useState2[0];\n  var _useState3 = useState(visible),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isVisible = _useState4[0],\n    setIsVisible = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    quickResults = _useState6[0],\n    setQuickResults = _useState6[1];\n  var quickSearch = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var postsRef = collection(db, 'Posts');\n      try {\n        var querySnapshot = yield getDocs(query(postsRef, where('topic', '>=', q), where('topic', '<=', q + \"\\uF8FF\"), orderBy('topic'), limit(10)));\n        console.log('Query snapshot:', querySnapshot);\n        var results = querySnapshot.docs.map(function (doc) {\n          var _doc$data = doc.data(),\n            topic = _doc$data.topic;\n          var suggestion = topic.substring(topic.indexOf(q), topic.indexOf(q) + q.length);\n          return suggestion;\n        });\n        console.log('Query results:', results);\n        setQuickResults(results);\n      } catch (error) {\n        console.error('Error performing quick search:', error);\n        setQuickResults([]);\n      }\n    });\n    return function quickSearch() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    if (visible && q.length > 0) {\n      quickSearch();\n      setIsVisible(true);\n      Animated.timing(slideAnim, {\n        toValue: 0,\n        duration: 300,\n        useNativeDriver: true\n      }).start();\n    } else {\n      setIsVisible(false);\n      Animated.timing(slideAnim, {\n        toValue: -100,\n        duration: 300,\n        useNativeDriver: true\n      }).start();\n    }\n  }, [visible, q, slideAnim]);\n  useEffect(function () {\n    if (!visible) {\n      setQuickResults([]);\n    }\n  }, [visible]);\n  return _jsx(Animated.View, {\n    style: [styles.modal, {\n      transform: [{\n        translateY: slideAnim\n      }]\n    }],\n    children: quickResults.length > 0 ? quickResults.map(function (result, index) {\n      return _jsx(Text, {\n        style: styles.resultItem,\n        children: result\n      }, index);\n    }) : _jsx(Text, {\n      style: styles.message,\n      children: \"No quick results found\"\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  modal: {\n    backgroundColor: '#fff',\n    minHeight: 60,\n    width: '100%',\n    padding: 10,\n    borderRadius: 5,\n    elevation: 3\n  },\n  message: {\n    alignSelf: 'center',\n    marginTop: 10,\n    color: '#2696b8'\n  },\n  resultItem: {\n    marginBottom: 5\n  }\n});\nexport default QuickModal;","map":{"version":3,"names":["React","useEffect","useState","Animated","View","Text","StyleSheet","orderBy","collection","query","startAt","limit","getDocs","endAt","where","db","jsx","_jsx","QuickModal","_ref","visible","onClose","q","_useState","Value","_useState2","_slicedToArray","slideAnim","_useState3","_useState4","isVisible","setIsVisible","_useState5","_useState6","quickResults","setQuickResults","quickSearch","_ref2","_asyncToGenerator","postsRef","querySnapshot","console","log","results","docs","map","doc","_doc$data","data","topic","suggestion","substring","indexOf","length","error","apply","arguments","timing","toValue","duration","useNativeDriver","start","style","styles","modal","transform","translateY","children","result","index","resultItem","message","create","backgroundColor","minHeight","width","padding","borderRadius","elevation","alignSelf","marginTop","color","marginBottom"],"sources":["C:/Users/Alus/Downloads/Campus-Vibes-V1-main/Campus-Vibes-V1-main/mobile/components/QuickModal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Animated, View, Text, StyleSheet } from 'react-native';\nimport { orderBy, collection, query, startAt, limit, getDocs, endAt, where } from 'firebase/firestore';\nimport { db } from '../firebase/firebase';\n\nconst QuickModal = ({ visible, onClose, q }) => {\n  const [slideAnim] = useState(new Animated.Value(-100));\n  const [isVisible, setIsVisible] = useState(visible);\n  const [quickResults, setQuickResults] = useState([]);\n\n  const quickSearch = async () => {\n    const postsRef = collection(db, 'Posts');\n  \n    try {\n      const querySnapshot = await getDocs(\n        query(\n          postsRef,\n          where('topic', '>=', q),\n          where('topic', '<=', q + '\\uf8ff'),\n          orderBy('topic'),\n          limit(10)\n        )\n      );\n  \n      console.log('Query snapshot:', querySnapshot);\n  \n      const results = querySnapshot.docs.map((doc) => {\n        const { topic } = doc.data();\n        const suggestion = topic.substring(\n          topic.indexOf(q),\n          topic.indexOf(q) + q.length\n        );\n        return suggestion;\n      });\n  \n      console.log('Query results:', results);\n  \n      setQuickResults(results);\n    } catch (error) {\n      console.error('Error performing quick search:', error);\n      setQuickResults([]);\n    }\n  };\n  \n\n  useEffect(() => {\n    if (visible && q.length > 0) {\n      quickSearch();\n      setIsVisible(true);\n      Animated.timing(slideAnim, { toValue: 0, duration: 300, useNativeDriver: true }).start();\n    } else {\n      setIsVisible(false);\n      Animated.timing(slideAnim, { toValue: -100, duration: 300, useNativeDriver: true }).start();\n    }\n  }, [visible, q, slideAnim]);\n\n  useEffect(() => {\n    if (!visible) {\n      setQuickResults([]);\n    }\n  }, [visible]);\n\n  return (\n    <Animated.View style={[styles.modal, { transform: [{ translateY: slideAnim }] }]}>\n      {quickResults.length > 0 ? (\n        quickResults.map((result, index) => (\n          <Text key={index} style={styles.resultItem}>{result}</Text>\n        ))\n      ) : (\n        <Text style={styles.message}>No quick results found</Text>\n      )}\n    </Animated.View>\n  );\n};\n\n\n\nconst styles = StyleSheet.create({\n  modal: {\n    backgroundColor: '#fff',\n    minHeight: 60,\n    width: '100%',\n    padding: 10,\n    borderRadius: 5,\n    elevation: 3,\n  },\n  message: {\n    alignSelf: 'center',\n    marginTop: 10,\n    color: '#2696b8',\n  },\n  resultItem: {\n    marginBottom: 5,\n  },\n});\n\nexport default QuickModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}